# Public Work Summary - Frontend Implementation Guide

## Overview

The **Public Work Summary** is an optional profile section generated by admin action. It provides additional context based on publicly available project descriptions.

This section is supportive and editable by the candidate.

---

## Framing Guidelines

### Terminology

| Internal (code/API) | External (UI) |
|---------------------|---------------|
| `gitHubSummary` | "Public work summary" |
| Generate summary | "Generate public work summary" |
| GitHub enrichment | (never shown) |

### What to AVOID in UI

- "AI-generated"
- "GitHub analysis"
- "Automated summary"
- Generation timestamps
- Scoring, ratings, or judgments

The summary should feel like **human-curated editorial context**.

---

## API Endpoints

### Admin: Generate Summary

**POST** `/api/admin/candidates/{id}/github-summary`

### Candidate: Get Profile

**GET** `/api/candidates/profile`

New fields:
```typescript
{
  gitHubSummary?: string;
  gitHubSummaryGeneratedAt?: string;  // Used internally, not shown in UI
}
```

### Candidate: Edit Summary

**PUT** `/api/candidates/profile`

Include `gitHubSummary` in the profile update payload.

---

## Visibility Rules

| User | Can See? | Can Edit? | Can Generate? |
|------|----------|-----------|---------------|
| Candidate (own profile) | Yes (if exists) | Yes | No |
| Admin | Yes | No | Yes |
| Company (shortlist) | Yes (after delivery) | No | No |
| Other candidates | No | No | No |

---

## Summary Format

The summary follows a consistent structure:
- **Intro paragraph** - One neutral observational sentence
- **Bullet points** - 3-4 factual items from project documentation
- **Closing paragraph** - One descriptive (not evaluative) sentence

### Rendering Bullets

Parse the raw text and render styled `<ul>` with `<li>` items:

```tsx
{(() => {
  const lines = summary.split('\n').filter(line => line.trim());
  const intro: string[] = [];
  const bullets: string[] = [];
  const closing: string[] = [];
  let section: 'intro' | 'bullets' | 'closing' = 'intro';

  for (const line of lines) {
    if (line.trim().startsWith('- ')) {
      section = 'bullets';
      bullets.push(line.trim().slice(2));
    } else if (section === 'bullets') {
      section = 'closing';
      closing.push(line.trim());
    } else if (section === 'intro') {
      intro.push(line.trim());
    } else {
      closing.push(line.trim());
    }
  }

  return (
    <>
      {intro.length > 0 && <p className="mb-3">{intro.join(' ')}</p>}
      {bullets.length > 0 && (
        <ul className="list-disc list-outside ml-5 space-y-2 mb-3">
          {bullets.map((bullet, idx) => <li key={idx}>{bullet}</li>)}
        </ul>
      )}
      {closing.length > 0 && <p>{closing.join(' ')}</p>}
    </>
  );
})()}
```

---

## Candidate Profile UI

**Location:** `app/candidate/profile/page.tsx`

### Section Title

```
Public work summary (based on project documentation)
```

### Layout

- Show "Edit" link that navigates to edit page
- Display formatted summary with styled bullets
- Hide section entirely if no summary exists

### No Summary State

If `gitHubUrl` exists but no summary - show nothing. Don't explain why.

---

## Candidate Edit Page

**Location:** `app/candidate/profile/edit/page.tsx`

Only show textarea if `gitHubSummaryGeneratedAt` exists (meaning a summary has been generated).

```tsx
{hasGitHubSummary && (
  <div className="form-group">
    <label>
      Public work summary (based on project documentation)
    </label>
    <textarea
      value={gitHubSummary}
      onChange={(e) => setGitHubSummary(e.target.value)}
      rows={6}
    />
    <p className="text-xs text-muted-foreground">
      This summary is based on publicly available project descriptions. You can edit it.
    </p>
  </div>
)}
```

---

## Admin Candidate Page

**Location:** `app/admin/candidates/[id]/page.tsx`

### Generate Button

Show "Generate" if no summary exists, "Regenerate" if one exists.

### Tooltip

```
Creates a short summary based on public project descriptions.
```

### Display

Show formatted summary with styled bullets. No timestamp.

---

## Company / Shortlist Preview (Before Approval)

**Location:** `app/company/shortlists/[id]/page.tsx` (preview mode)

### Important: Do NOT show full summary before approval

The preview page is for directional confidence, not deep evaluation.
Showing the full summary gives away value before payment.

### What to show instead

A light signal that public work was reviewed:

```tsx
{preview.hasPublicWorkSummary && (
  <div className="flex items-center gap-1.5 text-xs text-muted-foreground">
    <CheckIcon className="w-3.5 h-3.5 text-green-600" />
    <span>Public work reviewed (projects & documentation)</span>
  </div>
)}
```

### Microcopy for unlock prompt

```
Full profiles unlock after approval, including work summaries
```

---

## Company / Shortlist View (After Approval)

**Location:** `app/company/shortlists/[id]/page.tsx` (delivered mode)

### Placement

- Inside candidate card
- Below capabilities/skills
- Before recommendations section

### Layout

```tsx
{candidate.gitHubSummary && (
  <div className="mb-4 p-4 bg-muted/50 rounded-lg">
    <p className="text-sm font-medium mb-2">
      Public work summary (based on project documentation)
    </p>
    <div className="text-sm text-muted-foreground">
      {/* Render with styled bullets */}
    </div>
  </div>
)}
```

### Behavior

- Only show full summary AFTER approval/unlock
- Render summary if available
- Do not show loading states
- If unavailable, render nothing (no placeholder)

---

## UX Constraints

1. **Never mention AI** - The source is irrelevant
2. **Never mention GitHub in labels** - It's just "public work"
3. **No timestamps** - Don't show when generated
4. **Always show Edit** - Candidates must feel ownership
5. **No badges/icons** - Keep it plain text (except preview indicator)
6. **No explanation needed** - It's just context

The summary should read like something an internal recruiter wrote after reviewing public links.

---

## Implementation Status

### Admin Pages
- [x] Add "Generate" button (shows only if gitHubUrl exists)
- [x] Display summary without timestamp
- [x] Add "Regenerate" option for existing summaries
- [x] Styled bullet rendering

### Candidate Profile
- [x] Display summary with "Edit" action
- [x] Use title "Public work summary (based on project documentation)"
- [x] Styled bullet rendering
- [x] Hide section entirely if no summary

### Candidate Edit
- [x] Add textarea (only if summary exists)
- [x] Save via profile PUT endpoint

### Company/Shortlist Preview
- [x] Show "Public work reviewed" indicator (not full summary)
- [x] Updated unlock copy to mention work summaries

### Company/Shortlist Delivered
- [x] Display full summary in candidate card
- [x] Plain styling, no emphasis
- [x] Styled bullet rendering
- [x] Hide if not available

---

## Backend Requirements

The backend needs to provide:

1. `gitHubSummary` field on candidate profile
2. `gitHubSummaryGeneratedAt` field (internal, for conditional display)
3. `hasPublicWorkSummary` boolean on shortlist preview objects
4. POST endpoint for admin to generate summary
5. Accept `gitHubSummary` in profile PUT for candidate edits
